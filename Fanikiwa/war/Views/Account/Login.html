﻿﻿﻿﻿﻿﻿﻿﻿﻿<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Fanikiwa - Peer-to-Peer Lending</title>
    <link href="/Images/Dollar.ico" rel="shortcut icon" type="image/x-icon" />
<link rel="stylesheet" href="/Content/Site.css" type="text/css" />
<script src="/Scripts/jquery-2.0.3.js" type="text/javascript"></script>
<script src="/Scripts/CustomScripts.js" type="text/javascript"></script>
     

</head>


<body>

    <header>
        <div class="content-wrapper">

            <div class="float-left">
                <p class="site-title" title="Fanikiwa - Peer - To - Peer Lending">
                    Fanikiwa - Peer - To - Peer Lending
                </p>
            </div>


            <div class="float-right">
                <section id="login">
                <text> Welcome To Fanikiwa, <a id="lnkloggedinuser"
					style="cursor: pointer;" href="#" onclick="ManageProfile()"
					title="Manage Profile"></a> <a id="lnklogoff"
					style="cursor: pointer;" href="#" onclick="LogOff()"
					title="Log Off">Log off</a> </text>
                </section>
            </div>
 


            <div id="nav">
                <ul id="menu">

                    <li>

                        <div class="floatleft">
                            
                                <div>
                                    <a id="btnSubmitIndexForm" style="cursor: pointer;" href="/Views/Home/Index.html" >Home</a>
                                </div>    
                            
                        </div>

                    </li>


                    <li>

                        <div class="floatleft">
                           
                                <div>
                                    <a id="btnSubmitListLendOffersForm" style="cursor: pointer;" href="/Views/Offers/ListLendOffers.html" >Get A loan</a>
                                </div>    
                            
                        </div>

                    </li>

                    <li>

                        <div class="floatleft">
                            
                                <div>
                                    <a id="btnSubmitListBorrowOffersForm" style="cursor: pointer;" href="/Views/Offers/ListBorrowOffers.html" >Make An Investment</a>
                                </div>    
                            
                        </div>

                    </li>

                    <li>

                        <div class="floatleft">
                            
                                <div>
                                    <a id="btnSubmitListMyOffersForm"  href="/Views/Offers/ListMyOffers.html" style="cursor: pointer;">My Offers</a>
                                </div>    
                            
                        </div>

                    </li>



                     
                        
                        <li id="subMenuMyProfile">

                            <div class="floatleft">
                               
                                    <div>
                                        <a id="btnSubmitEditProfileSubForm"  href="/Views/Account/EditProfile.html" style="cursor: pointer;">My Profile</a>
                                    </div>    
                                
                            </div>

                        </li>

                        <li id="subMenuMyAccounts">

                            <div class="floatleft">
                                
                                    <div>
                                        <a id="btnSubmitMyAccountsForm"  href="/Views/Account/MyAccounts.html" style="cursor: pointer;">My Accounts</a>
                                    </div>    
                                
                            </div>

                        </li>
                         
                     <li>

                        <div class="floatleft">
                             
                                <div>
                                    <a id="btnSubmitMyInvestMentsForm"  href="/Views/Loans/ListMyInvestments.html" style="cursor: pointer;">My InvestMents</a>
                                </div>    
                            
                        </div>

                    </li>

                        <li id="subMenuMyLoans">

                            <div class="floatleft">
                                
                                    <div>
                                        <a id="btnSubmitMyLoansForm"  href="/Views/Loans/ListMyLoans.html" style="cursor: pointer;">My Loans</a>
                                    </div>    
                                
                            </div>

                        </li>
                        
                        <li id="subMenuLendingGroups">

                            <div class="floatleft">
                                 
                                    <div>
                                        <a id="btnSubmitGetMyLendingGroupsForm"  href="/Views/LendingGroups/List.html" style="cursor: pointer;">My Lending Groups</a>
                                    </div>    
                                
                            </div>

                        </li>
                
                         
                        <li id="subMenuChangePassword">

                            <div class="floatleft">
                                
                                    <div>
                                        <a id="btnSubmitChangePasswordForm"  href="/Views/Account/_ChangePasswordPartial.html" style="cursor: pointer;">Change Password</a>
                                    </div>    
                                
                            </div>

                        </li>
                        
                        <li id="subMenuDeRegister">

                            <div class="floatleft">
                                
                                    <div>
                                        <a id="btnSubmitDeRegisterForm"  href="/Views/Account/DeRegister.html" style="cursor: pointer;">DeRegister</a>
                                    </div>    
                                
                            </div>

                        </li>
                        
                        

                    

                    <li>

                        <div class="floatleft">
                           
                                <div>
                                    <a id="btnSubmitHelpForm"  href="/Views/Home/Help.html" style="cursor: pointer;">Help</a>
                                </div>    
                            
                        </div>

                    </li>

                    <li>

                        <div class="floatleft">
                            
                                <div>
                                    <a id="btnSubmitContactUsForm"  href="/Views/Contact/ContactUs.html" style="cursor: pointer;">Contact Us</a>
                                </div>    
                            
                        </div>

                    </li>

                    <li>

                        <div class="floatleft">
                            
                                <div>
                                    <a id="btnSubmitContactsForm" href="/Views/Home/Contact.html"  style="cursor: pointer;">Contacts</a>
                                </div>    
                            
                        </div>

                    </li>

                    <li>

                        <div class="floatleft">
                            
                                <div>
                                    <a id="btnSubmitAboutForm"  href="/Views/Home/About.html" style="cursor: pointer;">About</a>
                                </div>    
                            
                        </div>

                    </li>



                </ul>
            </div>


        </div>


    </header>




	<div id="body">


		<section class="content-wrapper main-content clear-fix">

			<div id="error-display-div" class="displaynone"></div>


			<hgroup class="title">
				<h2 class="page-title">Login</h2>
			</hgroup>

			<form action="javascript:void(0);">

				<fieldset>
					<legend>Login</legend>

					<article class="col1">
						<div class="pad">

							<div>
								<label for="txtEmail">Email</label> <input id="txtEmail"
									placeholder="Email" autofocus="autofocus" type="text"></input>
							</div>

							<div>
								<label for="txtPassword">Password</label> <input
									id="txtPassword" placeholder="Password" type="password"></input>
							</div>


						</div>
					</article>


					<div style="float: left; clear: both">
						<input type="submit" value="Login" id="btnLogin"  /> 
						  Not Registered Click
						<a id="btnRegisterForm" href="/Views/Account/Register.html" style="cursor: pointer;">Here </a>
						  To Register 		 
					</div>

						  
						  <div style="float: left; clear: both"> 
							<input type="submit" value="SMSTest" id="btnTest"
								style="float: left; clear: both" /> 
					  		 
						</div>
						  
						  
					
				</fieldset>


			</form>


		</section>


	</div>




	<footer>

		<hr />

		<div class="content-wrapper clearboth">
			<div class="float-left">
				<p style="font-size: 15px">Copyright &copy;  
					Software Providers Limited. All Rights Reserved.</p>
			</div>
		</div>


		<div class="content-wrapper clearboth">
			<div>

	 

			</div>
		</div>


	</footer>





	<script type="text/javascript">
  
	  document.getElementById('btnTest').onclick = function() {
      	window.location.href = "/Views/Test/SMSTest.html";
            }
       	
	
 	var errormsg='';
 	errormsg +=   '<ul id="errorList">' ;
       // var ROOT ='https://1-dot-fanikiwaweb.appspot.com/_ah/api';
       var ROOT ='http://localhost:8888/_ah/api';   
       function init() {
        
        	try {
        	  
        // Parameters are APIName,APIVersion,CallBack function,API Root
        gapi.client.load('userprofileendpoint', 'v1', null, ROOT);
        		
        document.getElementById('btnLogin').onclick = function() {
	    Login();
        	  } 
       
      } catch(exception) {  
          console.log("Error : " + exception);
          errormsg += '<li>' + exception   + '</li>';
          DisplayException(errormsg); 
   }
 }
        
        // Login function that will execute the Login call
        function Login() {

           	try {
           	
            errormsg='';
            ClearException(); 
            errormsg +=   '<ul id="errorList">' ;
            var error_free = true;
            
        	// Validate the entries
        	var _Email = document.getElementById('txtEmail').value;
        	var _Password = document.getElementById('txtPassword').value;  
        	
        	if(_Email.length == 0)
          	 {        		 
        		errormsg += '<li>' + " Email cannot be null "   + '</li>'; 
              	error_free = false;    
          	 }
          	 if(_Password.length == 0)
          	 {        		 
	             errormsg += '<li>' + " Password cannot be null "   + '</li>'; 
	           	 error_free = false;   
          	 } 
          	 
          	 if (!error_free){
    	         errormsg += "</ul>";
    	    	 $("#error-display-div").html(errormsg); 
    	         $("#error-display-div").removeClass('displaynone');
    	         $("#error-display-div").addClass('displayblock');
    	         $("#error-display-div").show();  
    	         return;
             }
            else{
    	        ClearException(); 
             }
          	 
        	// Build the Request Object
        	var login = {};
        	login.userId = _Email;
        	login.pwd = _Password;
 
        	gapi.client.userprofileendpoint.login(login).execute(function(resp) {
        		
        		if (!resp.code) {
        			console.log(resp.userId );
        			
			 if (resp.userId == 'undefined') {
				 document.getElementById('txtEmail').value = '';
				 document.getElementById('txtPassword').value = ''; 
				 alert("Authentication failed check your Email and Password...");
		    	 return;
			 }
        			 
        		// Save resp (userprofile) globally, Store it in the local
				// storage
                localStorage.loggedinuser = resp.userId;
 
        		 window.location.href = "/Views/Home/Index.html";
        		
        		} 
        		else { 
        			console.log(resp.code + " : " + resp.message); 
        			errormsg += '<li>' + resp.code + " : " + resp.message   + '</li>';
        			DisplayException(errormsg);
        		}         		
        	});         	
        	} catch(exception) { 
        		console.log("Error : " + exception);
        		errormsg += '<li>' + exception   + '</li>';
                DisplayException(errormsg);
           }
       }
       
        function DisplayException(errormsg) {
       	 
	      	errormsg += "</ul>";
	      		 
	       	 $("#error-display-div").html(errormsg); 
	         $("#error-display-div").removeClass('displaynone');
	         $("#error-display-div").addClass('displayblock');
	         $("#error-display-div").show();  
      	  }

	   	   	function ClearException() {
	   	   		$('#errorList').remove();
	   	   		$('#error-display-div').empty();
	   	   	}
   	   	
    </script>

	<script src="https://apis.google.com/js/client.js?onload=init"></script>






</body>


</html>
